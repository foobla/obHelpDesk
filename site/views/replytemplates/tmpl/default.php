<?php/** * @package        $Id: default.php 2 2013-07-30 08:16:00Z thongta $ * @author         foobla.com * @copyright      2007-2014 foobla.com. All rights reserved. * @license        GNU/GPL. */// no direct accessdefined( '_JEXEC' ) or die;$user = JFactory::getUser();JHtml::addIncludePath( JPATH_COMPONENT . '/helpers/html' );JHtml::_( 'behavior.tooltip' );$field = JRequest::getCmd( 'field' );$listOrder = $this->escape( $this->state->get( 'list.ordering' ) );$listDirn = $this->escape( $this->state->get( 'list.direction' ) );$document = JFactory::getDocument();# set page title$document->setTitle( JText::_( 'COM_OBHELPDESK_REPLY_TEMPLATES' ) );?><div id="foobla">	<?php	require JPATH_COMPONENT . DS . 'helpers' . DS . 'menu.php';	$menu = new obHelpDeskMenuHelper();	$menu->topnav( 'replytemplates' );	?>	<form action="<?php echo JRoute::_( 'index.php?option=com_obhelpdesk&view=replytemplates' ); ?>" method="post" name="adminForm" id="adminForm">		<div class="row-fluid">			<div class="form-inline span4">				<div class="input-append">					<input type="text" class="span3" name="filter_search" id="filter_search" value="<?php echo $this->escape( $this->state->get( 'filter.search' ) ); ?>" size="40" title="<?php echo JText::_( 'OBHELPDESK_SEARCH_IN_NAME' ); ?>" />					<button type="submit" class="btn"><?php echo JText::_( 'OBHELPDESK_FILTER_SUBMIT' ); ?></button>					<button type="button" class="btn" onclick="document.getElementById('filter_search').value=''; this.form.submit();"><?php echo JText::_( 'OBHELPDESK_FILTER_CLEAR' ); ?></button>				</div>			</div>			<div class="span8">				<div class="form-inline pull-right btn-group">					<button type="button" class="btn btn-primary" onclick="submitbutton('replytemplate.add')">						<i class="icon-plus-2"></i>&nbsp;<?php echo JText::_( 'OBHELPDESK_NEW' ); ?>					</button>					<button class="btn btn-primary dropdown-toggle" data-toggle="dropdown">						<span class="caret"></span>					</button>					<ul class="dropdown-menu">						<li>							<a href="javscript:void();" onclick="submitbutton('replytemplates.enable')">								<i class="icon-publish" style="color: #51a351;"></i>&nbsp;<?php echo JText::_( 'COM_OBHELPDESK_ENABLED' ); ?>							</a>						</li>						<li>							<a href="javscript:void();" onclick="submitbutton('replytemplates.disable')">								<i class="icon-unpublish" style="color: #bd362f;"></i>&nbsp;<?php echo JText::_( 'COM_OBHELPDESK_DISABLED' ); ?>							</a>						</li>						<li>							<a href="javscript:void();" onclick="submitbutton('replytemplates.remove')">								<i class="icon-delete"></i>&nbsp;<?php echo JText::_( 'COM_OBHELPDESK_DELETE' ); ?>							</a>						</li>					</ul>				</div>			</div>		</div>		<div class="clearfix">&nbsp;</div>		<table class="table table-striped">			<thead>			<tr>				<th width="2%">					<input type="checkbox" name="checkall-toggle" value="" title="<?php echo JText::_( 'JGLOBAL_CHECK_ALL' ); ?>" onclick="Joomla.checkAll(this)" />				</th>				<th>					<?php echo JHtml::_( 'grid.sort', 'COM_OBHELPDESK_SUBJECT', 'a.subject', $listDirn, $listOrder ); ?>				</th>				<th class="nowrap" width="5%">					<?php echo JHtml::_( 'grid.sort', 'COM_OBHELPDESK_CANNED_RESPONSE_LEVEL_LBL', 'a.level', $listDirn, $listOrder ); ?>				</th>				<th class="nowrap" width="15%">					<?php echo JHtml::_( 'grid.sort', 'COM_OBHELPDESK_CREATED_DATE', 'a.created_date', $listDirn, $listOrder ); ?>				</th>			</tr>			</thead>			<tfoot>			<tr>				<td colspan="4">					<?php echo $this->pagination->getListFooter(); ?>				</td>			</tr>			</tfoot>			<tbody>			<?php			$i = 0;			foreach ( $this->items as $item ) : ?>				<tr class="row<?php echo $i % 2; ?>">					<td>						<?php echo JHtml::_( 'grid.id', $i, $item->id ); ?>					</td>					<td>						<div style="position: relative;">							<a <?php if ( ! $item->enable ) {								echo 'style="text-decoration:line-through;"';							} ?>" href="javascript:ShowDetailMsg(<?php echo $item->id ?>);"><?php echo $item->subject; ?></a>							<div class="form-inline obhelpdesk-msg-icon">								<?php if ( $item->staff_id == $user->id ): ?>									<a class="" title="<?php echo JText::_( 'COM_OBHELPDESK_EDIT_REPLY' ); ?>" href="<?php echo JRoute::_( 'index.php?option=com_obhelpdesk&task=replytemplate.edit&id=' . $item->id ); ?>"><i class="icon-pencil-2"></i></a>								<?php endif; ?>								<a class="" onclick="ShowDetailMsg(<?php echo $item->id ?>);"><i id="obhelpdesk_item_<?php echo $item->id ?>_ico" class="icon-expand"></i></a>							</div>							<div id="obhelpdesk_item_<?php echo $item->id ?>" style="display:none;">								<hr /><?php echo obHelpDeskHelper::bbcodeToHtml( obHelpDeskHelper::html2bbcode( $item->content ) ); ?>							</div>						</div>					</td>					<td class="obhelpdesk-center">						<!--						@TODO: make this button the same as the template manager does						 -->						<?php echo $item->level; ?>					</td>					<td class="obhelpdesk-center">						<?php echo obHelpDeskHelper::facebookTime( $item->created_date ); ?>					</td>				</tr>				<?php $i ++ ?>			<?php endforeach; ?>			</tbody>		</table>		<div>			<input type="hidden" name="task" value="" />			<input type="hidden" name="boxchecked" value="0" />			<input type="hidden" name="filter_order" value="<?php echo $listOrder; ?>" />			<input type="hidden" name="filter_order_Dir" value="<?php echo $listDirn; ?>" />			<?php echo JHtml::_( 'form.token' ); ?>		</div>	</form></div><script type="text/javascript">	function ShowDetailMsg(itemid) {		id_ico = 'obhelpdesk_item_' + itemid + '_ico';		id_div = 'obhelpdesk_item_' + itemid;		if (document.getElementById(id_ico).className == 'icon-expand') {			document.getElementById(id_ico).className = 'icon-contract';			document.getElementById(id_div).style.display = '';		} else {			document.getElementById(id_ico).className = 'icon-expand';			document.getElementById(id_div).style.display = 'none';		}	}</script>